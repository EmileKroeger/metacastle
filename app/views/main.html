<div class="castlebox">
  <div ng-repeat="row in rows" class="row">
    <span ng-repeat="cell in row"
      ng-style="getStyle($index, $parent.$index)"
      class="tile test">
      &nbsp;
    </span>
  </div>
  
</div>